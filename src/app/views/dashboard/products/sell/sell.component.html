<div class="main">
  <h1 class="heading">
    Create sales order
  </h1>
  <!-- <p-calendar [(ngModel)]="date3" [showIcon]="true"></p-calendar> -->

</div>


<div class="main">
  <!-- <h4 class="heading">
    Select sale items
  </h4> -->

  <div class="cart phone-only">
    <i (click)="toggleCart()" class="pi pi-shopping-cart"></i>
    <div class="amount">
      {{sale?.total | currency:'R'}}
    </div>
  </div>
  <div class="sell-grid">

    <div class="products">
      <!-- <div class="list-filters">
        <div class="input-times">
          <input type="text" [(ngModel)]="search" placeholder="search">
          <div class="times" (click)="clearSearch()">
            <i class="pi pi-times"></i>
          </div>
        </div>
        <div>
          <div class="select">
            <div class="label">
              <i class="pi pi-filter"></i> <span class="pc-only">category : </span>
            </div>
            <div class="input">
              <select [(ngModel)]="searchByCatergory">
                <option value="" selected>All</option>
                <option [value]="cat" *ngFor="let cat of categories">{{cat}}</option>
              </select>
            </div>
          </div>
        </div>

      </div> -->


      <div class="small-cards small-cards-filter">
        <div class="card filter-card">
          <div class="list-filters topbar">
            <div class="search-box">
              <div class="input-times">
                <input type="text" class="roundInput"  [(ngModel)]="search" placeholder="ðŸ”Ž search here ...">
              </div>
            </div>
           
            <div>
              <select [(ngModel)]="searchByCatergory" class="roundInput">
                <option value="" selected>All</option>
                <option [value]="cat" *ngFor="let cat of categories">{{cat}}</option>
              </select>
            </div>
            <div>
              <button class="btn btn-transparent" (click)="scann()">
                <span class=""><i class="pi pi-ticket"></i>Scan</span>
              </button>
            </div>
          </div>
        </div>
      </div>


      <div class="small-cards small-cards-filter">
        <div class="card filter-card">
          <div class="list-filters topbar">
            <div class="search-box">
              <div class="input-times">
                <input type="text" class="roundInput"  [(ngModel)]="search" placeholder="ðŸ”Ž search here ...">
              </div>
            </div>
           
            <div>
              <select [(ngModel)]="searchByCatergory" class="roundInput">
                <option value="" selected>All</option>
                <option [value]="cat" *ngFor="let cat of categories">{{cat}}</option>
              </select>
            </div>
            <div>
              <button class="btn btn-transparent" (click)="scann()">
                <span class=""><i class="pi pi-ticket"></i>Scan</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    






      <div class="small-cards-body" *ngIf="products$  | async as products">

        <div class="small-cards" *ngIf="products.length > 0; else notFound">
          <span *ngFor="let item of products | searchproduct: search | searchproductbycatergory:searchByCatergory">
            <div class="card">
              <div class="image">
                <img [src]="item.images[0].Url" alt="" *ngIf="item.images" />
                <img src="assets/images/placeholder.png" *ngIf="!item.images" alt="" />
              </div>
              <div class="details">
                <p class="name">
                  {{item.Name}}
                  <span [ngClass]="item.Class">{{item.Quantity}} In Stock</span>
                </p>

              </div>
              <div class="price">
                <p>
                  {{item.UnitPrice | currency:'R'}}
                </p>
                <button class="action-btn  hover-shadow" (click)="doSell(item)"><i
                    class="pi pi-shopping-cart"></i></button>
                <!-- <button class="action-btn hover-shadow" (click)="details(item)">
                  <i class="pi pi-pencil"></i>
                </button> -->
              </div>
            </div>

          </span>

        </div>
        <ng-template #notFound>
          <div class="not-found">
            <img [src]="notFoundModel.Image" alt="no items found">
            <h1 class="message">
              {{notFoundModel.Message}}
              <span>
                <a class="link-add" (click)="add()">add new product.</a>
              </span>
            </h1>

          </div>
        </ng-template>
      </div>
    </div>
    <div class="summary" *ngIf="showCart">
      <div class="back" (click)="toggleCart()">
        <i class="pi pi-chevron-left"></i>
      </div>

      <div class="customer">
        <div class="list-filters">
          <div>
            <div class="select">
              <div class="label">
                <i class="pi pi-user"></i> <span class="pc-only"></span>
              </div>
              <div class="input">
                <select [(ngModel)]="selectedCustomerId">
                  <option value="" selected>Select customer</option>
                  <option [value]="customer.PartnerId" *ngFor="let customer of customers$  | async as customers">{{customer.Name}}</option>
                </select>
              </div>
            </div>
          </div>
          <div>
            <button class="btn" (click)="addCustomer()"><i class="pi pi-plus"></i></button>
          </div>

        </div>
      </div>
      <h3>
        Cart
      </h3>
      <div class="sell">
        <app-sale-sammary></app-sale-sammary>
      </div>

      <div class="sell total">
        <h4>
          {{sale?.total | currency:'R'}}
          <span>Total</span>
        </h4>

      </div>

      <div class="list-filters">
        <div class="add">
          <button class="btn" (click)="onSubmit()">Save order</button>
        </div>
        <div class="add">
          <button class="btn btn-warn" (click)="clear()">Clear form</button>
        </div>
      </div>
    </div>
  </div>

</div>

<div class="scanner-pluggin" *ngIf="showScan">
  <app-scanner></app-scanner>
</div>
