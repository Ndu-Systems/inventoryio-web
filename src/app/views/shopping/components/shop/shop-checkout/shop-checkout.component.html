<app-shopping-nav [shopPrimaryColor]="shopPrimaryColor" [shopSecondaryColor]="shopSecondaryColor"></app-shopping-nav>

<div class="container" *ngIf="sale$ | async as sale">
  <div class="cover-photo">
    <!-- <img [src]="bannerImage" alt=""> -->
  </div>
  <div class="content">
    <h3 class="small-heading">
      Checkout and payments
    </h3>
    <a class="back-link" (click)="back()"><i class="pi pi-arrow-left"></i> Back to shopping</a>

    <div class="col-1-of-2 col-70-30">


      <div class="shipping">
        <div class="shipping" *ngIf="step == '1'">
          <h3>
            Your personal details
          </h3>
          <hr>

          <app-shipping></app-shipping>
          <div class="add">
            <button class="btn" [ngStyle]="{'background-color':shopPrimaryColor, 'color':shopSecondaryColor}"
              (click)="nextStep(2)">Proceed to payment details</button>
          </div>
        </div>

        <div class="payments" *ngIf="step == '2'">
          <div class="shipping">
            <h3>
              Payments method
            </h3>
            <hr>
            <div class="options">
              <div class="input">


                <p-selectButton [options]="paymentMethods" [(ngModel)]="selectedType"></p-selectButton>

              </div>

              <div class="details-container" *ngIf="company.Bankings && selectedType == 'eft'">
                <div class="disclaimer">
                  <p>
                    Please make eft payment to the seller's account bellow, you can also contact them to ensure you
                    sending money to the right person
                  </p>

                  <div class="agree">
                    <p-checkbox [(ngModel)]="checkedEft" binary="true"></p-checkbox> I agree to pay using EFT to the
                    account bellow.
                  </div>

                </div>

                <div class="bank-card" [ngStyle]="{'background-color':shopPrimaryColor, 'color':shopSecondaryColor}">
                  <div class="bank-name">
                    <h1>
                      <span>Bank name</span>
                      {{company.Bankings[0].Value}}
                    </h1>
                  </div>
                  <div class="bank-acno">
                    <h1>
                      {{company.Bankings[1].Value}}
                    </h1>
                  </div>
                  <div class="bank-holder">
                    <div class="p1">
                      <h1>
                        <span>
                          Account Holder
                        </span>
                        {{company.Bankings[3].Value}}
                      </h1>
                    </div>
                    <div class="p2">
                      <h1>
                        <span>
                          Branch
                        </span>
                        {{company.Bankings[2].Value}}
                      </h1>
                    </div>
                  </div>
                </div>
              </div>


              <div class="details-container" *ngIf="selectedType == 'cash'">
                <div class="disclimer">
                  <p>
                    Please make sure you have cash in hand on delivery
                  </p>

                  <div class="agree">
                    <p-checkbox [(ngModel)]="checkedCash" binary="true"></p-checkbox> I agree to pay cash on delivery
                  </div>

                </div>
              </div>

              <div class="add">

                <a class="back-link back-link-btn" (click)="nextStep(1)"><i class="pi pi-arrow-left"></i> Back to
                  personal details</a>
                <button class="btn" [ngStyle]="{'background-color':shopPrimaryColor, 'color':shopSecondaryColor}"
                  (click)="onSubmit()">Place Order</button>
              </div>
            </div>
          </div>
        </div>


      </div>


      <div class="sammary-totals">
        <div class="shipping">
          <h3>
            Order summary
          </h3>
          <hr>

          <div class="col-1-of-2">
            <h4>
              Items 3
            </h4>

            <h4>
              {{sale?.total | currency:'R'}}

            </h4>
          </div>

          <div class="cart">
            <div class="col-1-of-3">
              <h4>
                Item
              </h4>
              <h4>
                Qty
              </h4>
              <h4>
                Total
              </h4>
            </div>
            <div class="col-1-of-3" *ngFor="let item of sale.items">
              <h5>
                {{item.name}}
              </h5>
              <h5>
                {{item.quantity}}
              </h5>
              <h5 class="price">
                {{item.subTotal| currency:'R'}}
              </h5>
            </div>
          </div>

          <div class="col-1-of-2" *ngIf="sale.charges.length > 0">
            <h4>
              Shipping:
            </h4>

            <h5>
              {{sale.charges[0]?.line}}
            </h5>
          </div>

          <div class="col-1-of-2">
            <h4>
              Purchase Date:
            </h4>

            <h5>
              {{today | date:'fullDate'}}
            </h5>
          </div>
          <div class="col-1-of-2">
            <h4>
              TOTAL COST:
            </h4>

            <h2 class="price">
              {{sale?.total | currency:'R'}}
            </h2>
          </div>

          <div class="input">
            <div class="add">

            </div>
          </div>

        </div>
      </div>

    </div>
  </div>
